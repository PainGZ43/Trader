# Phase 3: 제어 및 실행 (Control & Execution) 구현 검토 및 고려사항

## 1. 개요
Phase 2(대시보드) 구현이 완료되었습니다. 이제 시스템의 핵심인 **제어(Control)** 및 **주문 실행(Execution)** 인터페이스를 구현할 차례입니다. 이 단계는 실제 자산이 오가는 트레이딩의 안전성과 직결되므로 세심한 설계가 필요합니다.

## 2. 주요 구현 대상 (Task 목록 기준)
- **ControlPanel**: 전략 현황(점수/국면), 계좌 요약, 보유 종목 리스트
- **OrderPanel**: 수동 주문(매수/매도) 폼, **긴급 정지(Panic Button)**

## 3. 상세 고려사항 및 제안

### 3.1 안전 장치 (Safety First)
- **Panic Button (긴급 정지)**:
    - 단순 정지가 아닌 **3단계 옵션** 제공 고려:
        1.  **Stop Algo**: 신규 진입만 중단 (기존 포지션은 전략에 따라 청산)
        2.  **Cancel All**: 미체결 주문 일괄 취소
        3.  **Liquidate All**: 모든 포지션 시장가 청산 및 종료 (최후의 수단)
    - **실수 방지**: Liquidate All 같은 위험한 기능은 "길게 누르기" 또는 "더블 클릭"으로 작동하도록 UI 설계.

- **주문 확인 (Order Confirmation)**:
    - 호가창 클릭 주문 시, 스캘핑 속도를 위해 확인 창을 띄우지 않는 **"One-Click Trading"** 모드와, 안전을 위한 **"Confirmation"** 모드를 설정에서 선택할 수 있게 해야 합니다.

### 3.2 사용자 경험 (UX/Usability)
- **Portfolio Table (보유 종목)**:
    - **실시간 손익 점멸**: 수익률이 변할 때 배경색이 은은하게 깜빡여 시선을 끌어야 합니다.
    - **일괄 청산 버튼**: 특정 종목만 빠르게 전량 매도할 수 있는 버튼을 행마다 배치.

- **Manual Order (수동 주문)**:
    - **자동 수량 계산**: "예수금의 10%", "50%", "100%" 버튼을 두어 빠르게 수량을 입력할 수 있게 지원.
    - **호가 연동**: 호가창에서 가격을 클릭하면 주문창의 가격 필드가 자동으로 채워져야 합니다.

### 3.3 시각화 보강 (Phase 2 Refinement)
- **Chart Annotations**:
    - 체결 내역(Buy/Sell)을 차트 위에 화살표 마커로 표시하여 진입/청산 시점을 복기할 수 있게 해야 합니다.
- **Technical Indicators**:
    - 현재 이동평균선(MA) 외에 볼린저 밴드, RSI 등 보조지표를 차트에 오버레이 할 수 있는 옵션이 필요합니다.

## 4. 기술적 구현 전략
- **State Management**: 주문 상태(접수 -> 체결 -> 잔고 반영)가 비동기로 일어나므로, UI가 꼬이지 않도록 `OrderManager`의 상태를 `EventBus`를 통해 정확히 동기화해야 합니다.
- **Optimistic UI**: 주문 전송 즉시 UI에 "처리 중" 상태를 표시하고, 서버 응답이 오면 확정하는 방식으로 반응성을 높여야 합니다.

## 5. 추천 로드맵
1.  **Step 1**: `ControlPanel` 구현 (계좌/포트폴리오 조회) - *Risk Low*
2.  **Step 2**: `OrderPanel` UI 및 수동 주문 로직 연동 - *Risk Medium*
3.  **Step 3**: `Panic Button` 및 안전 장치 구현 - *Risk High*
4.  **Step 4**: 차트/호가창과 주문창의 상호작용(Interaction) 구현
